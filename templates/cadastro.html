<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Site de adestramento de cães">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="ABRAÃO SOUZA DA SILVA, ANTÔNIO LUIZ XAVIER DA COSTA, ELAINE SOUSA COSTA, JOSIVALDO DE SALES, LIVIA MATIAS DA SILVA, SAMANTA DOS SANTOS BISPO, SARA MOTA SILVA, TAMYRES CAPISTRANO DA SILVA.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!--link rel="stylesheet" href="cadastro.css"-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cadastro.css') }}">
    <link rel="shortcut icon" href="imagens/dog-face-logo-free-vector.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Fe.adestra </title>
</head>


<body>     
    
    <header class="header__cor">
        <div class="header__tamanho">
            <img src="imagens/imagem_nav.png" class="img_nav" alt="Logo marca Fernando Adestra">
    
        
            <nav class="navbar" style="background-color: #f7f9fa;">

        <ul class="nav justify-content-center">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href='/'>Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href='/adestramento'>Adestramento</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href='/cadastro'>Cadastro</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href='/login'>Login</a>
              </li>
              <!--li class="nav-item">
                <a class="nav-link" href='/agenda'>Agenda</a>
              </li-->
              <li class="nav-item">
                <a class="nav-link" href='/quem'>Quem é Fernando Adestra</a>
              </li>
            
          </ul>
        </nav>
    </header>
<br><br>
    
              <main>
                <!-- Formulário de Cadastro do Tutor -->
                <section class="customer-registration">
                    <h2>Cadastre-se como Tutor</h2> 
                    <form id="formulario" method="post">
                                       
                        <label for="tutor-name">Nome do Tutor:</label>
                        <input type="text" id="tutor-name" name="tutor-name" required>
            
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>

                        <label for="senha">Senha:</label>
                        <input type="senha" id="senha" name="senha" required>
            
                        <label for="address">Endereço:</label>
                        <input type="text" id="address" name="address" required>
            
                        <label for="phone">Telefone:</label>
                        <input type="tel" id="phone" name="phone" required>
            
                        <label for="image-authorization">Autoriza o uso de imagens:</label>
                        <select id="image-authorization" name="image-authorization" required>
                            <option value="">Selecione...</option>
                            <option value="Sim">Sim</option>
                            <option value="Não">Não</option>
                        </select>
            
                        <button type="submit">Cadastrar Tutor</button>
                    </form>
                </section>
            
                <!-- Formulário de Cadastro do Cão -->
                <section class="dog-registration">
                    <h2>Cadastro do Cão</h2>
                    <form id="dog-registration-form" method="post">
                        <label for="student-name">Nome do Aluno(a):</label>
                        <input type="text" id="student-name" name="student-name" required>
            
                        <label for="dog-breed">Raça do Cão:</label>
                        <input type="text" id="dog-breed" name="dog-breed" required>
            
                        <label for="student-age">Idade do Aluno:</label>
                        <input type="number" id="student-age" name="student-age" required>
            
                        <label for="gender">Sexo:</label>
                        <select id="gender" name="gender" required>
                            <option value="">Selecione...</option>
                            <option value="Macho">Macho</option>
                            <option value="Femea">Fêmea</option>
                        </select>
            
                        <label for="castrated">Castrado:</label>
                        <select id="castrated" name="castrated" required>
                            <option value="">Selecione...</option>
                            <option value="Sim">Sim</option>
                            <option value="Não">Não</option>
                        </select>
            
                        <button type="submit">Cadastrar Cão</button>
                    </form>
                </section>
            </main>
            






    <footer> 
        <div class="footer-content">
            <div class="footer-text">

            <h3>Fe.Adestra</h3>
            <p>Copyright © 2024 Projeto Integrador 2 - Eixo Computação - Univesp</p>
             <div class="social-media-icons">
               
                <a href="https://www.youtube.com/@Fe.adestra" target="_blank">
                    <img src="https://th.bing.com/th/id/OIP.hR6TQma4SWfP-yfQmT5oqgAAAA?rs=1&pid=ImgDetMain" alt="Youtube"
                        width="30px" height="30px">
                </a>
                <a href="https://www.instagram.com/fe.adestra/" target="_blank">
                    <img src="https://logopng.com.br/logos/instagram-40.png" alt="Instagram" width="30px" height="30px">
                </a>
                <a href="https://wa.me/5511962794972?text=Olá,%20gostaria%20de%20mais%20informações!" target="_blank">
                    <img src="https://logospng.org/download/whatsapp/logo-whatsapp-verde-icone-ios-android-4096.png"
                        alt="Whatsapp" width="30px" height="30px">
                </a>
    
        </footer>

    <script> 
        // Primeiro formulário: Cadastro do Tutor
        document.getElementById("formulario").addEventListener("submit", function(event) {
            event.preventDefault();

            // Obtém os dados do formulário de cadastro do tutor
            var Nome = document.getElementById("tutor-name").value;
            var Email = document.getElementById("email").value;
            var Senha = document.getElementById("senha").value;
            var Endereco = document.getElementById("address").value;
            var Telefone = document.getElementById("phone").value;
            var Autoriza_imagem = document.getElementById("image-authorization").value;
            

            // Faz a requisição para salvar os dados do tutor
            fetch('/salvar-dados', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    Nome : Nome,
                    Email : Email,
                    Senha : Senha,
                    Endereco : Endereco,
                    Telefone : Telefone,
                    Autoriza_imagem : Autoriza_imagem,
                    
                    
                }),


            })


            .then(response => {
                if (response.ok) {
                    alert("Dados do Tutor enviados com sucesso!");
                // Exibe o segundo formulário após o envio bem-sucedido do primeiro
                    document.getElementById("dog-registration-form").style.display = "block";
            } else {
                alert("Erro ao enviar os dados do tutor");
            }
        })
        .catch(error => console.error('Erro:', error));
    });

                
        // Segundo formulário: Cadastro do Animal
        document.getElementById("dog-registration-form").addEventListener("submit", function(event) {
            console.log("Formulário de animal submetido");  // Esta linha deve aparecer no console do navegador
            event.preventDefault();


            // Obtém os dados do formulário de cadastro do animal
            var Nome = document.getElementById("student-name").value;
            var Raca = document.getElementById("dog-breed").value;
            var idade = document.getElementById("student-age").value;
            var Sexo = document.getElementById("gender").value;
            var Castrado = document.getElementById("castrated").value;
            
            
            
            fetch('/salvar-animal', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    Nome : Nome,
                    Raca : Raca,
                    idade : idade,
                    Sexo : Sexo,
                    Castrado : Castrado,
                                       
                                        
                }),
            })
            .then(response => {
                if (response.ok) {
                    alert("Dados do Animal enviados com sucesso!");
                window.location.href = '/cadastro';
            } else {
                alert("Erro ao enviar os dados do animal");
            }
        })
        .catch(error => console.error('Erro:', error));
        
    });

    // Função para preencher informações do usuário, se necessário
    function preencherInfoUsuario() {
        var usuarioId = new URLSearchParams(window.location.search).get('id_resp');
        if (usuarioId) {
            document.getElementById('info-usuario').innerText = 'ID do Usuário: ' + usuarioId;
        }
    }

    preencherInfoUsuario();
    </script>
    
</body>
</html>